---
# VirtualServer with custom listeners from GlobalConfiguration
apiVersion: k8s.nginx.org/v1
kind: VirtualServer
metadata:
  name: custom-listeners-vs
  namespace: default
spec:
  host: custom.example.com
  tls:
    secret: custom-tls
  listener:
    http: custom-http-8080
    https: custom-https-8443
  upstreams:
  - name: app-backend
    service: app-service
    port: 8080
  routes:
  - path: /app
    action:
      pass: app-backend
---
apiVersion: k8s.nginx.org/v1
kind: GlobalConfiguration
metadata:
  name: nginx-configuration
  namespace: nginx-ingress
spec:
  listeners:
  - name: custom-http-8080
    port: 8080
    protocol: HTTP
  - name: custom-https-8443
    port: 8443
    protocol: HTTPS
  - name: admin-http-9090
    port: 9090
    protocol: HTTP